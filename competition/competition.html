<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">    
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../myStyles.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed|Saira+Extra+Condensed" rel="stylesheet">
    <title>Final Competition | Team Firework</title>
  </head>

  <body>
  	<!-- Page header -->
  	<div class="page-header">
  		<div class="container-fluid">
		<h1 align="center"><span style="color:#fad5a6"><b>Team Firework</b></span></h1>
		<h3 align="center"><span style="color:#fad5a6">Final Competition</span></h3>
		</div>
		<!--<div class="container" align="center">
			<audio src="audio/firework.mp3" loop="loop" controls controlsList="nodownload"><p>Oh no! You can't hear our music.</p></audio>
		</div>-->
  	</div>

  	<!-- Navigation bar -->
  	<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <!--<div class="container-fluid">
      <a href="#"><span class="glyphicon glyphicon-star-empty"></span></a>-->
  	  </div>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li class="active"><a href="index.html">Home<span class="sr-only">(current)</span></a></li>
        <li><a href="sparky.html">Sparky</a></li>
        <li><a href="team.html">Team</a></li>
        <li class="dropdown" class="active">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Assignments <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../lab1/lab1.html">Lab 1</a></li>
            <li><a href="../lab2/lab2.html">Lab 2</a></li>
            <li><a href="../lab3/lab3.html">Lab 3</a></li>
            <li><a href="../lab4/lab4.html">Lab 4</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="../milestone1/milestone1.html">Milestone 1</a></li>
            <li><a href="../milestone2/milestone2.html">Milestone 2</a></li>
            <li><a href="../milestone3/milestone3.html">Milestone 3</a></li>
            <li><a href="../milestone4/milestone4.html">Milestone 4</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="../ethics.html">Ethics HW</a></li>
            <li><a href="../competition.html">Final Competition!</a></li>
          </ul>
        </li>
        <li><a href="tutorials.html">Tutorials</a></li>
      </ul>
      <!--A search bar -->
      <!--<form class="navbar-form navbar-left">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>-->
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
    
    <!--Page content -->
    <div class="body-content">
    	<h1>It's All About Integration</h1>
      <p>Now that we have all the components, it's time to put them together! We assigned our pins, put our sensors on a PCB, soldered together our treasure detection circuit, implemented the DFS and........</p>
      <h3 align="center">Things Didn't Work :(</h3>
      <hr>

      <h1>Wall Sensors</h1>
      <p>One wall sensor values were super inconsistent! The robot was detecting walls with false positives and false negatives, which throws off the maze mapping and traversal.</p>
      <p><b>Solution 1: Averaging</b><br> We try to take an average over 5 values, with a slight delay of 25 milliseconds between each reading. (Without the delay, the 5 values were too similar.) This seemed to work for a while, but was heavily affected by shadows and lighting conditions.</p>
      <p><b>Solution 2: Number of correct values</b><br> Our second solution is to take 6 values, and return a wall detected if at least 4 values detect a wall. This prevents averaging of any "spikes" in data.</p>
      <hr>
      <h1>Line Sensors</h1>
      <p>At first, our line sensors were giving us very high values. There were faulty connection errors on our PCB (as the header pins were too big and our wires slipped easily), and also we had changed the position of the line sensors on the mount to prevent any values from falsely detecting an intersection when the robot tipped. When we finally settled on our final line sensor and mount design, we had to recalibrate the detection value.</p>
      <hr>
      <h1>DFS Optimization</h1>
      <p>After we have thoroughly tested the DFS, we started adding optimizations. The largest optimization is to prevent the last backtrack, where the usual DFS algorithm would return to the root of the tree (the starting node). But we wanted to do this in a method where we don't have to save the already-traversed path. So we used what we call a "root update" condition. Say we have the tree below.</p>
      <img src="dfs-rootupdate1.jpg" align="center">
      <p>The blue circles represent traversed nodes. We have gone from node 19 to 18 to 17, then back to 18 and 19. We are going to be moving to node 15 next. However, 15 is the last unexplored neighbor of 19. We don't need 19 to be the root of the tree anymore! So when we are moving to the last unexplored neighbor of the root node, then we can update our tree's root.</p>
      <img src="dfs-rootupdate2.jpg" align="center">
      <p>Similarly, in this tree, we have updated our root to 15, traversed to 15, 14, and back to 15 again. 11 is the last unexplored neighbor of the root (15). So when we go to 11, we update the root to 11. Now that 11 is the root and there are no more neighbors, we know we are done. In essence, this prevents the last backtrack in a usual DFS, where the robot would have to traverse from 11, to 15, to 19, then end.</p>
      <hr>
      <h1>Treasure Detection</h1>
    </div>

    <!-- Footer -->
    <div id="footer">
      <div class="container">
        <p class="muted credit" align="center">Brought to you by Team Firework. Have an explosive day!</p>
      </div>
    </div>

    <!-- Bootstrap core JavaScript -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>


  </body>

</html>
